import{_ as L,r,o as h,e as N,w as v,h as o,t as u,b as l,k as U,z as A,A as q,c as k,F as T,d as D,j as S,m as g,B as K,C as O,D as P,E as Q,G as W,H as X,I as Y,J as Z,K as x,l as G,v as B,y as M,L as ee,M as te,N as se,O as ie,P as oe,Q as ne,R as ae,S as le,U as re,V as ce}from"./index.4fbbd1b1.js";const ue={name:"Rename",props:{visible:Boolean,confirmSubmit:Function},emits:["update:visible","onSubmit"],data(){const e=t=>(t==null?void 0:t.length)<=10;return{title:"",rules:[{required:!0,message:this.$t("enterGroupName")},{validator:e,message:this.$t("maximum10characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title="")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},de={class:"popup-title"},he={class:"footer"};function ve(e,t,i,_,s,n){const f=r("van-field"),m=r("van-button"),d=r("van-form"),F=r("van-popup");return h(),N(F,{show:n.dialogVisible,"onUpdate:show":t[2]||(t[2]=b=>n.dialogVisible=b),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:v(()=>[o("h3",de,u(e.$t("enterGroupName")),1),l(d,{class:"popup-content",onSubmit:n.onSubmit},{default:v(()=>[l(f,{modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=b=>s.title=b),label:"",placeholder:e.$t("maximum10characters"),clearable:"",rules:s.rules},null,8,["modelValue","placeholder","rules"]),o("div",he,[l(m,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=b=>n.dialogVisible=!1)},{default:v(()=>[U(u(e.$t("cancel")),1)]),_:1}),l(m,{class:"btn","native-type":"submit",type:"primary",round:""},{default:v(()=>[U(u(e.$t("confirm1")),1)]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["show"])}var j=L(ue,[["render",ve],["__scopeId","data-v-c915b360"]]);const pe={name:"ChangeGroup",props:{visible:Boolean,title:{type:String,default:""},type:{type:String,default:"1"},isRemark:{type:Boolean,default:!1},selected:{type:[String,Number],default:0},groups:{type:Array,default(){return[]}}},components:{ChangeName:j},emits:["update:visible","update:selected","select"],data(){return{checked:this.initSelected,visible1:!1,remark:""}},computed:{show:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},initSelected:{get(){return this.selected},set(e){this.$emit("update:selected",e)}}},watch:{show(e){e&&(this.checked=this.initSelected)}},methods:{select(){this.isRemark?this.$emit("select",this.checked,this.remark):this.$emit("select",this.checked)},addFavoriteGroup(e){this.type==="1"?this.addTokenFavoriteGroup(e):this.type==="2"&&this.addNftFavoriteGroup(e)},addTokenFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});A(e).then(i=>{i?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});q(e).then(i=>{i?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}}},fe={class:"confirm-box"};function me(e,t,i,_,s,n){const f=r("van-radio"),m=r("van-cell"),d=r("van-field"),F=r("van-cell-group"),b=r("van-radio-group"),$=r("van-button"),R=r("van-action-sheet"),I=r("ChangeName");return h(),k(T,null,[l(R,{show:n.show,"onUpdate:show":t[4]||(t[4]=y=>n.show=y),description:"",title:i.title,teleport:"#app"},{default:v(()=>[l(b,{modelValue:s.checked,"onUpdate:modelValue":t[3]||(t[3]=y=>s.checked=y)},{default:v(()=>[l(F,null,{default:v(()=>[l(m,{title:e.$t("defaultGroup"),clickable:"",onClick:t[0]||(t[0]=y=>s.checked=0)},{"right-icon":v(()=>[l(f,{name:0})]),_:1},8,["title"]),(h(!0),k(T,null,D(i.groups,(y,w)=>(h(),N(m,{key:w,title:y.name,clickable:"",onClick:V=>s.checked=y.group_id},{"right-icon":v(()=>[l(f,{name:y.group_id},null,8,["name"])]),_:2},1032,["title","onClick"]))),128)),l(m,{title:e.$t("newGroup"),onClick:t[1]||(t[1]=y=>s.visible1=!0),clickable:"",icon:"add-o"},null,8,["title"]),i.isRemark?(h(),N(d,{key:0,class:"input-remark",modelValue:s.remark,"onUpdate:modelValue":t[2]||(t[2]=y=>s.remark=y),rows:"1",autosize:"",label:"",type:"textarea",placeholder:e.$t("enterRemark")},null,8,["modelValue","placeholder"])):S("",!0)]),_:1})]),_:1},8,["modelValue"]),o("div",fe,[l($,{type:"primary",onClick:g(n.select,["stop"]),round:"",block:""},{default:v(()=>[U(u(e.$t("confirm1")),1)]),_:1},8,["onClick"])])]),_:1},8,["show","title"]),l(I,{visible:s.visible1,"onUpdate:visible":t[5]||(t[5]=y=>s.visible1=y),confirmSubmit:n.addFavoriteGroup},null,8,["visible","confirmSubmit"])],64)}var H=L(pe,[["render",me],["__scopeId","data-v-091171da"]]);const ge={name:"EditRemark",props:{visible:Boolean,confirmSubmit:Function,initRemark:String},emits:["update:visible","onSubmit"],data(){const e=t=>(t==null?void 0:t.length)<=50;return{title:this.initRemark||"",rules:[{required:!0,message:this.$t("enterRemark")},{validator:e,message:this.$t("maximum50characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title=this.initRemark||"")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},_e={class:"popup-title"},be={class:"footer"};function ye(e,t,i,_,s,n){const f=r("van-field"),m=r("van-button"),d=r("van-form"),F=r("van-popup");return h(),N(F,{show:n.dialogVisible,"onUpdate:show":t[2]||(t[2]=b=>n.dialogVisible=b),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:v(()=>[o("h3",_e,u(e.$t("editRemark")),1),l(d,{class:"popup-content",onSubmit:n.onSubmit},{default:v(()=>[l(f,{modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=b=>s.title=b),label:"",placeholder:e.$t("maximum50characters"),clearable:"",rules:s.rules},null,8,["modelValue","placeholder","rules"]),o("div",be,[l(m,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=b=>n.dialogVisible=!1)},{default:v(()=>[U(u(e.$t("cancel")),1)]),_:1}),l(m,{class:"btn","native-type":"submit",type:"primary",round:""},{default:v(()=>[U(u(e.$t("confirm1")),1)]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["show"])}var J=L(ge,[["render",ye],["__scopeId","data-v-79195c08"]]);const ke={name:"TokenFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:H,ChangeName:j,EditRemark:J},data(){return{activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}},computed:{groups(){return this.$store.state.userFavoriteGroups}},watch:{activeType(e){e==="1"&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=(await K(this.activeGroup).catch(async()=>[])).map(e=>({...e,id:e.token+"-"+e.chain,address:e.token,network:e.chain,priceChange24h:e!=null&&e.price_change?(e==null?void 0:e.price_change)/100:0,priceUSD:(e==null?void 0:e.current_price_usd)||0}))},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(t===0)return;let i=this.$toast.loading({forbidClick:!0,duration:0});O(e.token+"-"+e.chain,this.activeGroup).then(_=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{i.clear()})},changeFavoritesIndex(e,t,i){if(!this.$f.verifyLogin())return;let _=e.token+"-"+e.chain,s=t+i;if(s<0||s+1>this.favoritesList.length)return;let n=this.favoritesList[s],f=n.token+"-"+n.chain,m=this.$toast.loading({forbidClick:!0,duration:0});P(_,f,this.activeGroup).then(d=>{d?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{m.clear()})},confirmSwitchGroup(e){if(!!this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});Q(this.selectedToken.token+"-"+this.selectedToken.chain,e).then(i=>{i?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}else this.visible1=!1},addFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});A(e).then(i=>{i?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},removeFavoriteGroup(e){!this.$f.verifyLogin()||this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then(()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});W(e.group_id).then(i=>{i?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}).catch(()=>{})},setTopFavoriteGroup(e,t){if(!this.$f.verifyLogin()||t===0)return;let i=this.$toast.loading({forbidClick:!0,duration:0});X(e.group_id).then(_=>{this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{i.clear()})},changeIndexFavoriteGroup(e,t,i){if(!this.$f.verifyLogin())return;let _=e.group_id,s=t+i;if(s<0||s+1>this.groups.length)return;let f=this.groups[s].group_id,m=this.$toast.loading({forbidClick:!0,duration:0});Y(_,f).then(d=>{d?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{m.clear()})},rename(e){this.curGroup=e,this.visible3=!0},changeFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});Z(e,this.curGroup.group_id).then(i=>{i?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0}),i=this.curToken.token+"-"+this.curToken.chain;x(i,e).then(_=>{_?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(_=>{console.log(_),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}}},$e={key:0},Ge={class:"fav-tabs-container"},Fe={class:"table-list"},Ce={class:"table-item table-header"},Ne={class:"table-item_d"},Te={class:"table-item_d"},we={class:"table-item_d"},Se={class:"table-item_d"},Ue={class:"table-item"},Le={class:"token-info table-item_d"},Re={class:"icon-token-container"},Ie=["src"],De={class:"token-symbol"},Ve={class:"table-item_d"},ze=["onClick"],Ee={class:"table-item_d token-sort"},Be=["onClick"],Me=["onClick"],je=["onClick"],Ae={class:"table-item_d"},qe=["onClick"],He={key:1},Je={class:"add-text"},Ke={class:"table-list"},Oe={class:"table-item table-header"},Pe={class:"table-item_d"},Qe={class:"table-item_d"},We={class:"table-item_d"},Xe={class:"table-item_d"},Ye={class:"table-item_d"},Ze={class:"table-item_d"},xe=["onClick"],et={class:"table-item_d"},tt=["onClick"],st=["onClick"],it=["onClick"],ot={class:"table-item_d"},nt=["onClick"];function at(e,t,i,_,s,n){var c;const f=r("van-tab"),m=r("van-tabs"),d=r("van-image"),F=r("DynamicScrollerItem"),b=r("DynamicScroller"),$=r("van-empty"),R=r("van-icon"),I=r("van-cell"),y=r("ChangeGroup"),w=r("ChangeName"),V=r("EditRemark"),z=r("van-action-sheet");return h(),k(T,null,[i.active==="1"?(h(),k("section",$e,[o("div",Ge,[l(m,{class:"fav-tabs",active:s.activeGroup,"onUpdate:active":t[0]||(t[0]=a=>s.activeGroup=a),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:v(()=>[l(f,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(h(!0),k(T,null,D(n.groups,(a,p)=>(h(),N(f,{key:p,title:a.name,name:a.group_id},null,8,["title","name"]))),128))]),_:1},8,["active"])]),o("ul",Fe,[o("li",Ce,[o("div",Ne,u(e.$t("token")),1),o("div",Te,u(e.$t("changeGroup")),1),o("div",we,u(e.$t("sort")),1),o("div",Se,u(e.$t("remark")),1)]),((c=s.favoritesList)==null?void 0:c.length)>0?(h(),N(b,{key:0,items:s.favoritesList,"min-item-size":30,"page-mode":"",class:"scroller"},{default:v(({item:a,index:p,active:C})=>[l(F,{item:a,active:C,"data-index":p},{default:v(()=>[o("li",Ue,[o("div",Le,[o("div",Re,[(h(),N(d,{key:a.token+a.chain,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(a),"error-icon":e.iconDefault},null,8,["src","error-icon"])),a.chain?(h(),k("img",{key:0,class:"icon-svg icon-network",src:`https://www.avestorage.cloud/chain/${a.chain}.png`,alt:"",srcset:""},null,8,Ie)):S("",!0)]),o("span",De,u(a.symbol),1)]),o("div",Ve,[o("i",{class:"iconfont icon-tiaozhengzu",onClick:g(E=>n.switchGroup(a),["stop"])},null,8,ze)]),o("div",Ee,[o("i",{class:G(["iconfont icon-zhiding",{disabled:p===0}]),onClick:g(E=>n.tokenSetTop(a,p),["stop"])},null,10,Be),o("i",{class:G(["iconfont icon-shangyi",{disabled:p===0}]),onClick:g(E=>n.changeFavoritesIndex(a,p,-1),["stop"])},null,10,Me),o("i",{class:G(["iconfont icon-xiayi",{disabled:p+1===s.favoritesList.length}]),onClick:g(E=>n.changeFavoritesIndex(a,p,1),["stop"])},null,10,je)]),o("div",Ae,[o("i",{class:"iconfont icon-zhongmingming",onClick:g(E=>n.handleEditRemark(a),["stop"])},null,8,qe)])])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])):S("",!0),B(l($,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[M,s.favoritesList&&s.favoritesList.length===0||!n.groups]])])])):i.active==="2"?(h(),k("section",He,[l(I,{title:"",onClick:t[1]||(t[1]=a=>s.visible2=!0),clickable:""},{value:v(()=>[l(R,{class:"icon-add-o",name:"add-o"}),o("span",Je,u(e.$t("newGroup")),1)]),_:1}),o("ul",Ke,[o("li",Oe,[o("div",Pe,u(e.$t("groupName")),1),o("div",Qe,u(e.$t("rename")),1),o("div",We,u(e.$t("sort")),1),o("div",Xe,u(e.$t("operate")),1)]),(h(!0),k(T,null,D(n.groups,(a,p)=>(h(),k("li",{key:p,class:"table-item"},[o("div",Ye,u(a.name),1),o("div",Ze,[o("i",{class:"iconfont icon-zhongmingming",onClick:g(C=>n.rename(a),["stop"])},null,8,xe)]),o("div",et,[o("i",{class:G(["iconfont icon-zhiding",{disabled:p===0}]),onClick:g(C=>n.setTopFavoriteGroup(a,p),["stop"])},null,10,tt),o("i",{class:G(["iconfont icon-shangyi",{disabled:p===0}]),onClick:g(C=>n.changeIndexFavoriteGroup(a,p,-1),["stop"])},null,10,st),o("i",{class:G(["iconfont icon-xiayi",{disabled:p+1===n.groups.length}]),onClick:g(C=>n.changeIndexFavoriteGroup(a,p,1),["stop"])},null,10,it)]),o("div",ot,[o("i",{class:"iconfont icon-ashbin",onClick:g(C=>n.removeFavoriteGroup(a),["stop"])},null,8,nt)])]))),128)),B(l($,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[M,n.groups&&n.groups.length===0||!n.groups]])])])):S("",!0),l(y,{visible:s.visible1,"onUpdate:visible":t[2]||(t[2]=a=>s.visible1=a),selected:s.activeGroup,"onUpdate:selected":t[3]||(t[3]=a=>s.activeGroup=a),title:e.$t("pleaseSelectGroup"),groups:n.groups,onSelect:n.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),l(w,{visible:s.visible2,"onUpdate:visible":t[4]||(t[4]=a=>s.visible2=a),confirmSubmit:n.addFavoriteGroup},null,8,["visible","confirmSubmit"]),l(w,{visible:s.visible3,"onUpdate:visible":t[5]||(t[5]=a=>s.visible3=a),confirmSubmit:n.changeFavoriteGroupName},null,8,["visible","confirmSubmit"]),l(V,{visible:s.visible4,"onUpdate:visible":t[6]||(t[6]=a=>s.visible4=a),initRemark:s.curRemark,confirmSubmit:n.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"]),l(z,{show:s.show,"onUpdate:show":t[7]||(t[7]=a=>s.show=a),actions:s.actions,"cancel-text":e.$t("cancel"),onSelect:n.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}var lt=L(ke,[["render",at],["__scopeId","data-v-6d2fe1ce"]]);const rt={name:"NftFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:H,ChangeName:j,EditRemark:J},data(){return{activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}},computed:{groups(){return this.$store.state.userNftFavoriteGroups},activeName(){let e={1:"Token",2:"NFT"};return(e==null?void 0:e[this.activeType])||"Token"}},watch:{activeType(e){e==="2"&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=await ee(this.activeGroup).catch(async()=>[])},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(t===0)return;let i=this.$toast.loading({forbidClick:!0,duration:0});te(e._id,this.activeGroup).then(_=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{i.clear()})},changeNftFavoritesIndex(e,t,i){if(!this.$f.verifyLogin())return;let _=e._id,s=t+i;if(s<0||s+1>this.favoritesList.length)return;let f=this.favoritesList[s]._id,m=this.$toast.loading({forbidClick:!0,duration:0});se(_,f,this.activeGroup).then(d=>{d?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{m.clear()})},confirmSwitchGroup(e){if(!!this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});ie(this.selectedToken._id,e).then(i=>{i?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}else this.visible1=!1},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});q(e).then(i=>{i?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},removeNftFavoriteGroup(e){!this.$f.verifyLogin()||this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then(()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});oe(e.group_id).then(i=>{i?(this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}).catch(()=>{})},setTopNftFavoriteGroup(e,t){if(!this.$f.verifyLogin()||t===0)return;let i=this.$toast.loading({forbidClick:!0,duration:0});ne(e.group_id).then(_=>{this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{i.clear()})},changeIndexNftFavoriteGroup(e,t,i){if(!this.$f.verifyLogin())return;let _=e.group_id,s=t+i;if(s<0||s+1>this.groups.length)return;let f=this.groups[s].group_id,m=this.$toast.loading({forbidClick:!0,duration:0});ae(_,f).then(d=>{d?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{m.clear()})},rename(e){this.curGroup=e,this.visible3=!0},changeNftFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});le(e,this.curGroup.group_id).then(i=>{i?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});re(this.curToken._id,e).then(i=>{i?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(i=>{console.log(i),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}}},ct={key:0},ut={class:"fav-tabs-container"},dt={class:"table-list"},ht={class:"table-item table-header"},vt={class:"table-item_d"},pt={class:"table-item_d"},ft={class:"table-item_d"},mt={class:"table-item_d"},gt={class:"table-item"},_t={class:"token-info table-item_d"},bt={class:"icon-token-container"},yt={class:"token-symbol"},kt={class:"table-item_d"},$t=["onClick"],Gt={class:"table-item_d token-sort"},Ft=["onClick"],Ct=["onClick"],Nt=["onClick"],Tt={class:"table-item_d"},wt=["onClick"],St={key:1},Ut={class:"add-text"},Lt={class:"table-list"},Rt={class:"table-item table-header"},It={class:"table-item_d"},Dt={class:"table-item_d"},Vt={class:"table-item_d"},zt={class:"table-item_d"},Et={class:"table-item_d"},Bt={class:"table-item_d"},Mt=["onClick"],jt={class:"table-item_d"},At=["onClick"],qt=["onClick"],Ht=["onClick"],Jt={class:"table-item_d"},Kt=["onClick"];function Ot(e,t,i,_,s,n){var z;const f=r("van-tab"),m=r("van-tabs"),d=r("van-image"),F=r("DynamicScrollerItem"),b=r("DynamicScroller"),$=r("van-empty"),R=r("van-icon"),I=r("van-cell"),y=r("ChangeGroup"),w=r("ChangeName"),V=r("EditRemark");return h(),k(T,null,[i.active==="1"?(h(),k("section",ct,[o("div",ut,[l(m,{class:"fav-tabs",active:s.activeGroup,"onUpdate:active":t[0]||(t[0]=c=>s.activeGroup=c),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:v(()=>[l(f,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(h(!0),k(T,null,D(n.groups,(c,a)=>(h(),N(f,{key:a,title:c.name,name:c.group_id},null,8,["title","name"]))),128))]),_:1},8,["active"])]),o("ul",dt,[o("li",ht,[o("div",vt,u(e.$t("token")),1),o("div",pt,u(e.$t("changeGroup")),1),o("div",ft,u(e.$t("sort")),1),o("div",mt,u(e.$t("remark")),1)]),((z=s.favoritesList)==null?void 0:z.length)>0?(h(),N(b,{key:0,items:s.favoritesList,"min-item-size":30,keyField:"id","page-mode":"",class:"scroller"},{default:v(({item:c,index:a,active:p})=>[l(F,{item:c,active:p,"data-index":a},{default:v(()=>[o("li",gt,[o("div",_t,[o("div",bt,[l(d,{round:"",width:"0.72rem",height:"0.72rem","icon-size":"0.72rem","lazy-load":"","show-loading":"",src:(c==null?void 0:c.logo)||e.iconDefault,"error-icon":e.iconDefault},null,8,["src","error-icon"])]),o("span",yt,u((c==null?void 0:c.name)||""),1)]),o("div",kt,[o("i",{class:"iconfont icon-tiaozhengzu",onClick:g(C=>n.switchGroup(c),["stop"])},null,8,$t)]),o("div",Gt,[o("i",{class:G(["iconfont icon-zhiding",{disabled:a===0}]),onClick:g(C=>n.tokenSetTop(c,a),["stop"])},null,10,Ft),o("i",{class:G(["iconfont icon-shangyi",{disabled:a===0}]),onClick:g(C=>n.changeNftFavoritesIndex(c,a,-1),["stop"])},null,10,Ct),o("i",{class:G(["iconfont icon-xiayi",{disabled:a+1===s.favoritesList.length}]),onClick:g(C=>n.changeNftFavoritesIndex(c,a,1),["stop"])},null,10,Nt)]),o("div",Tt,[o("i",{class:"iconfont icon-zhongmingming",onClick:g(C=>n.handleEditRemark(c),["stop"])},null,8,wt)])])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])):S("",!0),B(l($,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[M,s.favoritesList&&s.favoritesList.length===0||!n.groups]])])])):i.active==="2"?(h(),k("section",St,[l(I,{title:"",onClick:t[1]||(t[1]=c=>s.visible2=!0),clickable:""},{value:v(()=>[l(R,{class:"icon-add-o",name:"add-o"}),o("span",Ut,u(e.$t("newGroup")),1)]),_:1}),o("ul",Lt,[o("li",Rt,[o("div",It,u(e.$t("groupName")),1),o("div",Dt,u(e.$t("rename")),1),o("div",Vt,u(e.$t("sort")),1),o("div",zt,u(e.$t("operate")),1)]),(h(!0),k(T,null,D(n.groups,(c,a)=>(h(),k("li",{key:a,class:"table-item"},[o("div",Et,u(c.name),1),o("div",Bt,[o("i",{class:"iconfont icon-zhongmingming",onClick:g(p=>n.rename(c),["stop"])},null,8,Mt)]),o("div",jt,[o("i",{class:G(["iconfont icon-zhiding",{disabled:a===0}]),onClick:g(p=>n.setTopNftFavoriteGroup(c,a),["stop"])},null,10,At),o("i",{class:G(["iconfont icon-shangyi",{disabled:a===0}]),onClick:g(p=>n.changeIndexNftFavoriteGroup(c,a,-1),["stop"])},null,10,qt),o("i",{class:G(["iconfont icon-xiayi",{disabled:a+1===n.groups.length}]),onClick:g(p=>n.changeIndexNftFavoriteGroup(c,a,1),["stop"])},null,10,Ht)]),o("div",Jt,[o("i",{class:"iconfont icon-ashbin",onClick:g(p=>n.removeNftFavoriteGroup(c),["stop"])},null,8,Kt)])]))),128)),B(l($,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[M,n.groups&&n.groups.length===0||!n.groups]])])])):S("",!0),l(y,{visible:s.visible1,"onUpdate:visible":t[2]||(t[2]=c=>s.visible1=c),selected:s.activeGroup,"onUpdate:selected":t[3]||(t[3]=c=>s.activeGroup=c),title:e.$t("pleaseSelectGroup"),groups:n.groups,onSelect:n.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),l(w,{visible:s.visible2,"onUpdate:visible":t[4]||(t[4]=c=>s.visible2=c),confirmSubmit:n.addNftFavoriteGroup},null,8,["visible","confirmSubmit"]),l(w,{visible:s.visible3,"onUpdate:visible":t[5]||(t[5]=c=>s.visible3=c),confirmSubmit:n.changeNftFavoriteGroupName},null,8,["visible","confirmSubmit"]),l(V,{visible:s.visible4,"onUpdate:visible":t[6]||(t[6]=c=>s.visible4=c),initRemark:s.curRemark,confirmSubmit:n.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])],64)}var Pt=L(rt,[["render",Ot],["__scopeId","data-v-88d0aab0"]]);const Qt={name:"FavoriteManage",data(){return{active:this.$route.params.id||"1",activeType:this.$route.params.type||"1",show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}]}},computed:{curComponent(){return this.activeType==="2"?Pt:lt},activeName(){let e={1:"Token",2:"NFT"};return(e==null?void 0:e[this.activeType])||"Token"}},methods:{select(e){this.activeType=e.value},back(){var e,t,i;(e=window==null?void 0:window.main)!=null&&e.back?(i=(t=window==null?void 0:window.main)==null?void 0:t.back)==null||i.call(t):this.$router.go(-1)}}};function Wt(e,t,i,_,s,n){const f=r("van-tab"),m=r("van-tabs"),d=r("van-icon"),F=r("van-nav-bar"),b=r("van-action-sheet");return h(),k(T,null,[l(F,{"left-text":"","left-arrow":"",onClickLeft:n.back,fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2"},{title:v(()=>[l(m,{class:"tab-top",active:s.active,"onUpdate:active":t[0]||(t[0]=$=>s.active=$),type:"card",color:"#fff",background:"#2C3254","title-active-color":"#878FBC","title-inactive-color":"#878FBC"},{default:v(()=>[l(f,{title:e.$t("favoriteManage"),name:"1"},null,8,["title"]),l(f,{title:e.$t("groupManage"),name:"2"},null,8,["title"])]),_:1},8,["active"])]),right:v(()=>[o("button",{class:"select-btn",onClick:t[1]||(t[1]=g($=>s.show=!0,["stop"]))},[U(u(n.activeName)+" ",1),l(d,{name:"arrow-down"})])]),_:1},8,["onClickLeft"]),(h(),N(ce(n.curComponent),{activeType:s.activeType,active:s.active},null,8,["activeType","active"])),l(b,{show:s.show,"onUpdate:show":t[2]||(t[2]=$=>s.show=$),actions:s.actions,"cancel-text":e.$t("cancel"),onSelect:n.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}var Yt=L(Qt,[["render",Wt],["__scopeId","data-v-3bb63cbc"]]);export{Yt as default};
