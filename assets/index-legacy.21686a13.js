!function(){var e=document.createElement("style");e.innerHTML=".popup-title[data-v-c915b360]{font-size:.32rem;text-align:center;margin-top:.1rem}.popup-content[data-v-c915b360]{padding:1rem 0 0;font-size:.28rem;line-height:1.5}.popup-content[data-v-c915b360] .van-field{background-color:#f8f8f8;border-radius:.16rem;padding:.4rem .32rem}.footer[data-v-c915b360]{display:flex;justify-content:center;align-items:center;margin-top:1rem}.footer .btn[data-v-c915b360]{min-width:2.4rem}.footer .btn+.btn[data-v-c915b360]{margin-left:.4rem}.confirm-box[data-v-091171da]{padding:0 .4rem;margin:1rem 0 .3rem}.input-remark[data-v-091171da] .van-field__body{border:.01rem solid #878fbc;border-radius:.1rem;padding:.1rem .2rem}.popup-title[data-v-79195c08]{font-size:.32rem;text-align:center;margin-top:.1rem}.popup-content[data-v-79195c08]{padding:1rem 0 0;font-size:.28rem;line-height:1.5}.popup-content[data-v-79195c08] .van-field{background-color:#f8f8f8;border-radius:.16rem;padding:.4rem .32rem}.footer[data-v-79195c08]{display:flex;justify-content:center;align-items:center;margin-top:1rem}.footer .btn[data-v-79195c08]{min-width:2.4rem}.footer .btn+.btn[data-v-79195c08]{margin-left:.4rem}.fav-tabs-container[data-v-6d2fe1ce]{display:flex;align-items:center;justify-content:space-between}.fav-tabs[data-v-6d2fe1ce]{max-width:100vw}.table-list[data-v-6d2fe1ce]{font-size:.32rem;color:#1e2329;letter-spacing:0;font-weight:500;min-height:calc(100vh - 2.48rem);padding-bottom:.4rem}.table-list .table-item[data-v-6d2fe1ce]{display:flex;align-items:center;padding:0 .2rem}.table-list .table-item:not(.table-header)+.table-item[data-v-6d2fe1ce]{border-top:.02rem solid #F5F5F5}.table-list .table-item.table-header[data-v-6d2fe1ce]{font-size:.24rem;color:#999;letter-spacing:0;text-align:center;font-weight:400}.table-list .table-item.table-header .table-item_d[data-v-6d2fe1ce]{padding:.2rem 0}.table-list .table-item .table-item_d[data-v-6d2fe1ce]{padding:.3rem 0}.table-list .table-item .table-item_d .iconfont[data-v-6d2fe1ce]{font-size:.36rem;color:#888}.table-list .table-item .table-item_d .iconfont+.iconfont[data-v-6d2fe1ce]{margin-left:.3rem}.table-list .table-item .table-item_d .iconfont[data-v-6d2fe1ce]:active{opacity:.5}.table-list .table-item .table-item_d .iconfont.disabled[data-v-6d2fe1ce]{opacity:.3}.table-list .table-item .table-item_d[data-v-6d2fe1ce]:nth-child(1){flex:2.5;text-align:left;word-wrap:break-word}.table-list .table-item .table-item_d[data-v-6d2fe1ce]:nth-child(2){flex:1.5;text-align:center}.table-list .table-item .table-item_d[data-v-6d2fe1ce]:nth-child(3){flex:2;text-align:center}.table-list .table-item .table-item_d[data-v-6d2fe1ce]:nth-child(4){flex:1;text-align:center}.table-list .token-info[data-v-6d2fe1ce]{display:flex;align-items:center}.table-list .token-info .icon-collect[data-v-6d2fe1ce]{font-size:.32rem;color:#ccc;cursor:pointer;margin-right:.1rem}.table-list .token-info .icon-collect.collected[data-v-6d2fe1ce]{color:#558bed}.table-list .token-info .token-network[data-v-6d2fe1ce]{border:.02rem solid #878fbc;border-radius:.2rem;font-size:.24rem;color:#878fbc;padding:.04rem .1rem;margin-left:.1rem}.table-list .token-info .token-icon[data-v-6d2fe1ce]{margin-right:.18rem;border-radius:50%}.btn-add[data-v-6d2fe1ce]{position:sticky;bottom:0;padding:.3rem .8rem;background-color:#fff;box-shadow:0 0 .2rem #eee}.btn-add .button[data-v-6d2fe1ce]{border-radius:.16rem}.icon-add-o[data-v-6d2fe1ce]{color:#558bed;margin-right:.1rem}.add-text[data-v-6d2fe1ce]{color:#558bed}.select-btn[data-v-6d2fe1ce]{background-color:transparent;color:#878fbc;border:none}.token-symbol[data-v-6d2fe1ce]{word-wrap:break-word}.fav-tabs-container[data-v-88d0aab0]{display:flex;align-items:center;justify-content:space-between}.fav-tabs[data-v-88d0aab0]{max-width:100vw}.table-list[data-v-88d0aab0]{font-size:.32rem;color:#1e2329;letter-spacing:0;font-weight:500;min-height:calc(100vh - 2.48rem);padding-bottom:.4rem}.table-list .table-item[data-v-88d0aab0]{display:flex;align-items:center;padding:0 .2rem}.table-list .table-item:not(.table-header)+.table-item[data-v-88d0aab0]{border-top:.02rem solid #F5F5F5}.table-list .table-item.table-header[data-v-88d0aab0]{font-size:.24rem;color:#999;letter-spacing:0;text-align:center;font-weight:400}.table-list .table-item.table-header .table-item_d[data-v-88d0aab0]{padding:.2rem 0}.table-list .table-item .table-item_d[data-v-88d0aab0]{padding:.3rem 0}.table-list .table-item .table-item_d .iconfont[data-v-88d0aab0]{font-size:.36rem;color:#888}.table-list .table-item .table-item_d .iconfont+.iconfont[data-v-88d0aab0]{margin-left:.3rem}.table-list .table-item .table-item_d .iconfont[data-v-88d0aab0]:active{opacity:.5}.table-list .table-item .table-item_d .iconfont.disabled[data-v-88d0aab0]{opacity:.3}.table-list .table-item .table-item_d[data-v-88d0aab0]:nth-child(1){flex:2.5;text-align:left;word-wrap:break-word}.table-list .table-item .table-item_d[data-v-88d0aab0]:nth-child(2){flex:1.5;text-align:center}.table-list .table-item .table-item_d[data-v-88d0aab0]:nth-child(3){flex:2;text-align:center}.table-list .table-item .table-item_d[data-v-88d0aab0]:nth-child(4){flex:1;text-align:center}.table-list .token-info[data-v-88d0aab0]{display:flex;align-items:center}.table-list .token-info .icon-collect[data-v-88d0aab0]{font-size:.32rem;color:#ccc;cursor:pointer;margin-right:.1rem}.table-list .token-info .icon-collect.collected[data-v-88d0aab0]{color:#558bed}.table-list .token-info .token-network[data-v-88d0aab0]{border:.02rem solid #878fbc;border-radius:.2rem;font-size:.24rem;color:#878fbc;padding:.04rem .1rem;margin-left:.1rem}.table-list .token-info .token-icon[data-v-88d0aab0]{margin-right:.18rem;border-radius:50%}.btn-add[data-v-88d0aab0]{position:sticky;bottom:0;padding:.3rem .8rem;background-color:#fff;box-shadow:0 0 .2rem #eee}.btn-add .button[data-v-88d0aab0]{border-radius:.16rem}.icon-add-o[data-v-88d0aab0]{color:#558bed;margin-right:.1rem}.add-text[data-v-88d0aab0]{color:#558bed}.select-btn[data-v-88d0aab0]{background-color:transparent;color:#878fbc;border:none}.token-symbol[data-v-88d0aab0]{word-wrap:break-word;word-break:break-word}[data-v-3bb63cbc] .van-hairline--bottom:after{border-bottom:.02rem solid rgba(135,143,188,.3)}[data-v-3bb63cbc] .van-tabs--card .van-tabs__nav{border-color:#878fbc!important}[data-v-3bb63cbc] .van-tabs--card .van-tabs__nav .van-tab{padding:0 .3rem}[data-v-3bb63cbc] .van-nav-bar__title{max-width:85%}[data-v-3bb63cbc] .van-nav-bar__right{padding:0 .1rem}.select-btn[data-v-3bb63cbc]{background-color:transparent;color:#878fbc;border:none}\n",document.head.appendChild(e),System.register(["./index-legacy.a81fbc9a.js"],(function(e){"use strict";var t,i,a,s,o,n,l,r,c,d,h,m,u,p,b,f,v,g,y,k,$,_,G,w,F,C,x,T,S,U,N,L,z,R,I,V,D,E;return{setters:[function(e){t=e._,i=e.r,a=e.o,s=e.e,o=e.w,n=e.h,l=e.t,r=e.b,c=e.k,d=e.z,h=e.A,m=e.c,u=e.F,p=e.d,b=e.j,f=e.m,v=e.B,g=e.C,y=e.D,k=e.E,$=e.G,_=e.H,G=e.I,w=e.J,F=e.K,C=e.l,x=e.v,T=e.y,S=e.L,U=e.M,N=e.N,L=e.O,z=e.P,R=e.Q,I=e.R,V=e.S,D=e.U,E=e.V}],execute:function(){const B={name:"Rename",props:{visible:Boolean,confirmSubmit:Function},emits:["update:visible","onSubmit"],data(){return{title:"",rules:[{required:!0,message:this.$t("enterGroupName")},{validator:e=>e?.length<=10,message:this.$t("maximum10characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title="")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},M={class:"popup-title"},j={class:"footer"};var A=t(B,[["render",function(e,t,d,h,m,u){const p=i("van-field"),b=i("van-button"),f=i("van-form"),v=i("van-popup");return a(),s(v,{show:u.dialogVisible,"onUpdate:show":t[2]||(t[2]=e=>u.dialogVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:o((()=>[n("h3",M,l(e.$t("enterGroupName")),1),r(f,{class:"popup-content",onSubmit:u.onSubmit},{default:o((()=>[r(p,{modelValue:m.title,"onUpdate:modelValue":t[0]||(t[0]=e=>m.title=e),label:"",placeholder:e.$t("maximum10characters"),clearable:"",rules:m.rules},null,8,["modelValue","placeholder","rules"]),n("div",j,[r(b,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=e=>u.dialogVisible=!1)},{default:o((()=>[c(l(e.$t("cancel")),1)])),_:1}),r(b,{class:"btn","native-type":"submit",type:"primary",round:""},{default:o((()=>[c(l(e.$t("confirm1")),1)])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])}],["__scopeId","data-v-c915b360"]]);const q={name:"ChangeGroup",props:{visible:Boolean,title:{type:String,default:""},type:{type:String,default:"1"},isRemark:{type:Boolean,default:!1},selected:{type:[String,Number],default:0},groups:{type:Array,default:()=>[]}},components:{ChangeName:A},emits:["update:visible","update:selected","select"],data(){return{checked:this.initSelected,visible1:!1,remark:""}},computed:{show:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},initSelected:{get(){return this.selected},set(e){this.$emit("update:selected",e)}}},watch:{show(e){e&&(this.checked=this.initSelected)}},methods:{select(){this.isRemark?this.$emit("select",this.checked,this.remark):this.$emit("select",this.checked)},addFavoriteGroup(e){"1"===this.type?this.addTokenFavoriteGroup(e):"2"===this.type&&this.addNftFavoriteGroup(e)},addTokenFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});d(e).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});h(e).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}}},H={class:"confirm-box"};var J=t(q,[["render",function(e,t,d,h,v,g){const y=i("van-radio"),k=i("van-cell"),$=i("van-field"),_=i("van-cell-group"),G=i("van-radio-group"),w=i("van-button"),F=i("van-action-sheet"),C=i("ChangeName");return a(),m(u,null,[r(F,{show:g.show,"onUpdate:show":t[4]||(t[4]=e=>g.show=e),description:"",title:d.title,teleport:"#app"},{default:o((()=>[r(G,{modelValue:v.checked,"onUpdate:modelValue":t[3]||(t[3]=e=>v.checked=e)},{default:o((()=>[r(_,null,{default:o((()=>[r(k,{title:e.$t("defaultGroup"),clickable:"",onClick:t[0]||(t[0]=e=>v.checked=0)},{"right-icon":o((()=>[r(y,{name:0})])),_:1},8,["title"]),(a(!0),m(u,null,p(d.groups,((e,t)=>(a(),s(k,{key:t,title:e.name,clickable:"",onClick:t=>v.checked=e.group_id},{"right-icon":o((()=>[r(y,{name:e.group_id},null,8,["name"])])),_:2},1032,["title","onClick"])))),128)),r(k,{title:e.$t("newGroup"),onClick:t[1]||(t[1]=e=>v.visible1=!0),clickable:"",icon:"add-o"},null,8,["title"]),d.isRemark?(a(),s($,{key:0,class:"input-remark",modelValue:v.remark,"onUpdate:modelValue":t[2]||(t[2]=e=>v.remark=e),rows:"1",autosize:"",label:"",type:"textarea",placeholder:e.$t("enterRemark")},null,8,["modelValue","placeholder"])):b("",!0)])),_:1})])),_:1},8,["modelValue"]),n("div",H,[r(w,{type:"primary",onClick:f(g.select,["stop"]),round:"",block:""},{default:o((()=>[c(l(e.$t("confirm1")),1)])),_:1},8,["onClick"])])])),_:1},8,["show","title"]),r(C,{visible:v.visible1,"onUpdate:visible":t[5]||(t[5]=e=>v.visible1=e),confirmSubmit:g.addFavoriteGroup},null,8,["visible","confirmSubmit"])],64)}],["__scopeId","data-v-091171da"]]);const K={name:"EditRemark",props:{visible:Boolean,confirmSubmit:Function,initRemark:String},emits:["update:visible","onSubmit"],data(){return{title:this.initRemark||"",rules:[{required:!0,message:this.$t("enterRemark")},{validator:e=>e?.length<=50,message:this.$t("maximum50characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title=this.initRemark||"")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},O={class:"popup-title"},P={class:"footer"};var Q=t(K,[["render",function(e,t,d,h,m,u){const p=i("van-field"),b=i("van-button"),f=i("van-form"),v=i("van-popup");return a(),s(v,{show:u.dialogVisible,"onUpdate:show":t[2]||(t[2]=e=>u.dialogVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:o((()=>[n("h3",O,l(e.$t("editRemark")),1),r(f,{class:"popup-content",onSubmit:u.onSubmit},{default:o((()=>[r(p,{modelValue:m.title,"onUpdate:modelValue":t[0]||(t[0]=e=>m.title=e),label:"",placeholder:e.$t("maximum50characters"),clearable:"",rules:m.rules},null,8,["modelValue","placeholder","rules"]),n("div",P,[r(b,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=e=>u.dialogVisible=!1)},{default:o((()=>[c(l(e.$t("cancel")),1)])),_:1}),r(b,{class:"btn","native-type":"submit",type:"primary",round:""},{default:o((()=>[c(l(e.$t("confirm1")),1)])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])}],["__scopeId","data-v-79195c08"]]);const W={name:"TokenFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:J,ChangeName:A,EditRemark:Q},data:()=>({activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}),computed:{groups(){return this.$store.state.userFavoriteGroups}},watch:{activeType(e){"1"===e&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=(await v(this.activeGroup).catch((async()=>[]))).map((e=>({...e,id:e.token+"-"+e.chain,address:e.token,network:e.chain,priceChange24h:e?.price_change?e?.price_change/100:0,priceUSD:e?.current_price_usd||0})))},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});g(e.token+"-"+e.chain,this.activeGroup).then((e=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeFavoritesIndex(e,t,i){if(!this.$f.verifyLogin())return;let a=e.token+"-"+e.chain,s=t+i;if(s<0||s+1>this.favoritesList.length)return;let o=this.favoritesList[s],n=o.token+"-"+o.chain,l=this.$toast.loading({forbidClick:!0,duration:0});y(a,n,this.activeGroup).then((e=>{e?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{l.clear()}))},confirmSwitchGroup(e){if(this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});k(this.selectedToken.token+"-"+this.selectedToken.chain,e).then((e=>{e?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}else this.visible1=!1},addFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});d(e).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},removeFavoriteGroup(e){this.$f.verifyLogin()&&this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});$(e.group_id).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))})).catch((()=>{}))},setTopFavoriteGroup(e,t){if(!this.$f.verifyLogin())return;if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});_(e.group_id).then((e=>{this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeIndexFavoriteGroup(e,t,i){if(!this.$f.verifyLogin())return;let a=e.group_id,s=t+i;if(s<0||s+1>this.groups.length)return;let o=this.groups[s].group_id,n=this.$toast.loading({forbidClick:!0,duration:0});G(a,o).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{n.clear()}))},rename(e){this.curGroup=e,this.visible3=!0},changeFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});w(e,this.curGroup.group_id).then((e=>{e?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0}),i=this.curToken.token+"-"+this.curToken.chain;F(i,e).then((e=>{e?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}}},X={key:0},Y={class:"fav-tabs-container"},Z={class:"table-list"},ee={class:"table-item table-header"},te={class:"table-item_d"},ie={class:"table-item_d"},ae={class:"table-item_d"},se={class:"table-item_d"},oe={class:"table-item"},ne={class:"token-info table-item_d"},le={class:"icon-token-container"},re=["src"],ce={class:"token-symbol"},de={class:"table-item_d"},he=["onClick"],me={class:"table-item_d token-sort"},ue=["onClick"],pe=["onClick"],be=["onClick"],fe={class:"table-item_d"},ve=["onClick"],ge={key:1},ye={class:"add-text"},ke={class:"table-list"},$e={class:"table-item table-header"},_e={class:"table-item_d"},Ge={class:"table-item_d"},we={class:"table-item_d"},Fe={class:"table-item_d"},Ce={class:"table-item_d"},xe={class:"table-item_d"},Te=["onClick"],Se={class:"table-item_d"},Ue=["onClick"],Ne=["onClick"],Le=["onClick"],ze={class:"table-item_d"},Re=["onClick"];var Ie=t(W,[["render",function(e,t,c,d,h,v){const g=i("van-tab"),y=i("van-tabs"),k=i("van-image"),$=i("DynamicScrollerItem"),_=i("DynamicScroller"),G=i("van-empty"),w=i("van-icon"),F=i("van-cell"),S=i("ChangeGroup"),U=i("ChangeName"),N=i("EditRemark"),L=i("van-action-sheet");return a(),m(u,null,["1"===c.active?(a(),m("section",X,[n("div",Y,[r(y,{class:"fav-tabs",active:h.activeGroup,"onUpdate:active":t[0]||(t[0]=e=>h.activeGroup=e),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:o((()=>[r(g,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(a(!0),m(u,null,p(v.groups,((e,t)=>(a(),s(g,{key:t,title:e.name,name:e.group_id},null,8,["title","name"])))),128))])),_:1},8,["active"])]),n("ul",Z,[n("li",ee,[n("div",te,l(e.$t("token")),1),n("div",ie,l(e.$t("changeGroup")),1),n("div",ae,l(e.$t("sort")),1),n("div",se,l(e.$t("remark")),1)]),h.favoritesList?.length>0?(a(),s(_,{key:0,items:h.favoritesList,"min-item-size":30,"page-mode":"",class:"scroller"},{default:o((({item:t,index:i,active:c})=>[r($,{item:t,active:c,"data-index":i},{default:o((()=>[n("li",oe,[n("div",ne,[n("div",le,[(a(),s(k,{key:t.token+t.chain,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(t),"error-icon":e.iconDefault},null,8,["src","error-icon"])),t.chain?(a(),m("img",{key:0,class:"icon-svg icon-network",src:`https://www.avestorage.cloud/chain/${t.chain}.png`,alt:"",srcset:""},null,8,re)):b("",!0)]),n("span",ce,l(t.symbol),1)]),n("div",de,[n("i",{class:"iconfont icon-tiaozhengzu",onClick:f((e=>v.switchGroup(t)),["stop"])},null,8,he)]),n("div",me,[n("i",{class:C(["iconfont icon-zhiding",{disabled:0===i}]),onClick:f((e=>v.tokenSetTop(t,i)),["stop"])},null,10,ue),n("i",{class:C(["iconfont icon-shangyi",{disabled:0===i}]),onClick:f((e=>v.changeFavoritesIndex(t,i,-1)),["stop"])},null,10,pe),n("i",{class:C(["iconfont icon-xiayi",{disabled:i+1===h.favoritesList.length}]),onClick:f((e=>v.changeFavoritesIndex(t,i,1)),["stop"])},null,10,be)]),n("div",fe,[n("i",{class:"iconfont icon-zhongmingming",onClick:f((e=>v.handleEditRemark(t)),["stop"])},null,8,ve)])])])),_:2},1032,["item","active","data-index"])])),_:1},8,["items"])):b("",!0),x(r(G,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[T,h.favoritesList&&0===h.favoritesList.length||!v.groups]])])])):"2"===c.active?(a(),m("section",ge,[r(F,{title:"",onClick:t[1]||(t[1]=e=>h.visible2=!0),clickable:""},{value:o((()=>[r(w,{class:"icon-add-o",name:"add-o"}),n("span",ye,l(e.$t("newGroup")),1)])),_:1}),n("ul",ke,[n("li",$e,[n("div",_e,l(e.$t("groupName")),1),n("div",Ge,l(e.$t("rename")),1),n("div",we,l(e.$t("sort")),1),n("div",Fe,l(e.$t("operate")),1)]),(a(!0),m(u,null,p(v.groups,((e,t)=>(a(),m("li",{key:t,class:"table-item"},[n("div",Ce,l(e.name),1),n("div",xe,[n("i",{class:"iconfont icon-zhongmingming",onClick:f((t=>v.rename(e)),["stop"])},null,8,Te)]),n("div",Se,[n("i",{class:C(["iconfont icon-zhiding",{disabled:0===t}]),onClick:f((i=>v.setTopFavoriteGroup(e,t)),["stop"])},null,10,Ue),n("i",{class:C(["iconfont icon-shangyi",{disabled:0===t}]),onClick:f((i=>v.changeIndexFavoriteGroup(e,t,-1)),["stop"])},null,10,Ne),n("i",{class:C(["iconfont icon-xiayi",{disabled:t+1===v.groups.length}]),onClick:f((i=>v.changeIndexFavoriteGroup(e,t,1)),["stop"])},null,10,Le)]),n("div",ze,[n("i",{class:"iconfont icon-ashbin",onClick:f((t=>v.removeFavoriteGroup(e)),["stop"])},null,8,Re)])])))),128)),x(r(G,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[T,v.groups&&0===v.groups.length||!v.groups]])])])):b("",!0),r(S,{visible:h.visible1,"onUpdate:visible":t[2]||(t[2]=e=>h.visible1=e),selected:h.activeGroup,"onUpdate:selected":t[3]||(t[3]=e=>h.activeGroup=e),title:e.$t("pleaseSelectGroup"),groups:v.groups,onSelect:v.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),r(U,{visible:h.visible2,"onUpdate:visible":t[4]||(t[4]=e=>h.visible2=e),confirmSubmit:v.addFavoriteGroup},null,8,["visible","confirmSubmit"]),r(U,{visible:h.visible3,"onUpdate:visible":t[5]||(t[5]=e=>h.visible3=e),confirmSubmit:v.changeFavoriteGroupName},null,8,["visible","confirmSubmit"]),r(N,{visible:h.visible4,"onUpdate:visible":t[6]||(t[6]=e=>h.visible4=e),initRemark:h.curRemark,confirmSubmit:v.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"]),r(L,{show:h.show,"onUpdate:show":t[7]||(t[7]=e=>h.show=e),actions:h.actions,"cancel-text":e.$t("cancel"),onSelect:v.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}],["__scopeId","data-v-6d2fe1ce"]]);const Ve={name:"NftFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:J,ChangeName:A,EditRemark:Q},data:()=>({activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}),computed:{groups(){return this.$store.state.userNftFavoriteGroups},activeName(){return{1:"Token",2:"NFT"}?.[this.activeType]||"Token"}},watch:{activeType(e){"2"===e&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=await S(this.activeGroup).catch((async()=>[]))},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});U(e._id,this.activeGroup).then((e=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeNftFavoritesIndex(e,t,i){if(!this.$f.verifyLogin())return;let a=e._id,s=t+i;if(s<0||s+1>this.favoritesList.length)return;let o=this.favoritesList[s]._id,n=this.$toast.loading({forbidClick:!0,duration:0});N(a,o,this.activeGroup).then((e=>{e?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{n.clear()}))},confirmSwitchGroup(e){if(this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});L(this.selectedToken._id,e).then((e=>{e?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}else this.visible1=!1},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});h(e).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},removeNftFavoriteGroup(e){this.$f.verifyLogin()&&this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});z(e.group_id).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))})).catch((()=>{}))},setTopNftFavoriteGroup(e,t){if(!this.$f.verifyLogin())return;if(0===t)return;let i=this.$toast.loading({forbidClick:!0,duration:0});R(e.group_id).then((e=>{this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeIndexNftFavoriteGroup(e,t,i){if(!this.$f.verifyLogin())return;let a=e.group_id,s=t+i;if(s<0||s+1>this.groups.length)return;let o=this.groups[s].group_id,n=this.$toast.loading({forbidClick:!0,duration:0});I(a,o).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{n.clear()}))},rename(e){this.curGroup=e,this.visible3=!0},changeNftFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});V(e,this.curGroup.group_id).then((e=>{e?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});D(this.curToken._id,e).then((e=>{e?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((e=>{console.log(e),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{t.clear()}))}}},De={key:0},Ee={class:"fav-tabs-container"},Be={class:"table-list"},Me={class:"table-item table-header"},je={class:"table-item_d"},Ae={class:"table-item_d"},qe={class:"table-item_d"},He={class:"table-item_d"},Je={class:"table-item"},Ke={class:"token-info table-item_d"},Oe={class:"icon-token-container"},Pe={class:"token-symbol"},Qe={class:"table-item_d"},We=["onClick"],Xe={class:"table-item_d token-sort"},Ye=["onClick"],Ze=["onClick"],et=["onClick"],tt={class:"table-item_d"},it=["onClick"],at={key:1},st={class:"add-text"},ot={class:"table-list"},nt={class:"table-item table-header"},lt={class:"table-item_d"},rt={class:"table-item_d"},ct={class:"table-item_d"},dt={class:"table-item_d"},ht={class:"table-item_d"},mt={class:"table-item_d"},ut=["onClick"],pt={class:"table-item_d"},bt=["onClick"],ft=["onClick"],vt=["onClick"],gt={class:"table-item_d"},yt=["onClick"];var kt=t(Ve,[["render",function(e,t,c,d,h,v){const g=i("van-tab"),y=i("van-tabs"),k=i("van-image"),$=i("DynamicScrollerItem"),_=i("DynamicScroller"),G=i("van-empty"),w=i("van-icon"),F=i("van-cell"),S=i("ChangeGroup"),U=i("ChangeName"),N=i("EditRemark");return a(),m(u,null,["1"===c.active?(a(),m("section",De,[n("div",Ee,[r(y,{class:"fav-tabs",active:h.activeGroup,"onUpdate:active":t[0]||(t[0]=e=>h.activeGroup=e),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:o((()=>[r(g,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(a(!0),m(u,null,p(v.groups,((e,t)=>(a(),s(g,{key:t,title:e.name,name:e.group_id},null,8,["title","name"])))),128))])),_:1},8,["active"])]),n("ul",Be,[n("li",Me,[n("div",je,l(e.$t("token")),1),n("div",Ae,l(e.$t("changeGroup")),1),n("div",qe,l(e.$t("sort")),1),n("div",He,l(e.$t("remark")),1)]),h.favoritesList?.length>0?(a(),s(_,{key:0,items:h.favoritesList,"min-item-size":30,keyField:"id","page-mode":"",class:"scroller"},{default:o((({item:t,index:i,active:a})=>[r($,{item:t,active:a,"data-index":i},{default:o((()=>[n("li",Je,[n("div",Ke,[n("div",Oe,[r(k,{round:"",width:"0.72rem",height:"0.72rem","icon-size":"0.72rem","lazy-load":"","show-loading":"",src:t?.logo||e.iconDefault,"error-icon":e.iconDefault},null,8,["src","error-icon"])]),n("span",Pe,l(t?.name||""),1)]),n("div",Qe,[n("i",{class:"iconfont icon-tiaozhengzu",onClick:f((e=>v.switchGroup(t)),["stop"])},null,8,We)]),n("div",Xe,[n("i",{class:C(["iconfont icon-zhiding",{disabled:0===i}]),onClick:f((e=>v.tokenSetTop(t,i)),["stop"])},null,10,Ye),n("i",{class:C(["iconfont icon-shangyi",{disabled:0===i}]),onClick:f((e=>v.changeNftFavoritesIndex(t,i,-1)),["stop"])},null,10,Ze),n("i",{class:C(["iconfont icon-xiayi",{disabled:i+1===h.favoritesList.length}]),onClick:f((e=>v.changeNftFavoritesIndex(t,i,1)),["stop"])},null,10,et)]),n("div",tt,[n("i",{class:"iconfont icon-zhongmingming",onClick:f((e=>v.handleEditRemark(t)),["stop"])},null,8,it)])])])),_:2},1032,["item","active","data-index"])])),_:1},8,["items"])):b("",!0),x(r(G,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[T,h.favoritesList&&0===h.favoritesList.length||!v.groups]])])])):"2"===c.active?(a(),m("section",at,[r(F,{title:"",onClick:t[1]||(t[1]=e=>h.visible2=!0),clickable:""},{value:o((()=>[r(w,{class:"icon-add-o",name:"add-o"}),n("span",st,l(e.$t("newGroup")),1)])),_:1}),n("ul",ot,[n("li",nt,[n("div",lt,l(e.$t("groupName")),1),n("div",rt,l(e.$t("rename")),1),n("div",ct,l(e.$t("sort")),1),n("div",dt,l(e.$t("operate")),1)]),(a(!0),m(u,null,p(v.groups,((e,t)=>(a(),m("li",{key:t,class:"table-item"},[n("div",ht,l(e.name),1),n("div",mt,[n("i",{class:"iconfont icon-zhongmingming",onClick:f((t=>v.rename(e)),["stop"])},null,8,ut)]),n("div",pt,[n("i",{class:C(["iconfont icon-zhiding",{disabled:0===t}]),onClick:f((i=>v.setTopNftFavoriteGroup(e,t)),["stop"])},null,10,bt),n("i",{class:C(["iconfont icon-shangyi",{disabled:0===t}]),onClick:f((i=>v.changeIndexNftFavoriteGroup(e,t,-1)),["stop"])},null,10,ft),n("i",{class:C(["iconfont icon-xiayi",{disabled:t+1===v.groups.length}]),onClick:f((i=>v.changeIndexNftFavoriteGroup(e,t,1)),["stop"])},null,10,vt)]),n("div",gt,[n("i",{class:"iconfont icon-ashbin",onClick:f((t=>v.removeNftFavoriteGroup(e)),["stop"])},null,8,yt)])])))),128)),x(r(G,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[T,v.groups&&0===v.groups.length||!v.groups]])])])):b("",!0),r(S,{visible:h.visible1,"onUpdate:visible":t[2]||(t[2]=e=>h.visible1=e),selected:h.activeGroup,"onUpdate:selected":t[3]||(t[3]=e=>h.activeGroup=e),title:e.$t("pleaseSelectGroup"),groups:v.groups,onSelect:v.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),r(U,{visible:h.visible2,"onUpdate:visible":t[4]||(t[4]=e=>h.visible2=e),confirmSubmit:v.addNftFavoriteGroup},null,8,["visible","confirmSubmit"]),r(U,{visible:h.visible3,"onUpdate:visible":t[5]||(t[5]=e=>h.visible3=e),confirmSubmit:v.changeNftFavoriteGroupName},null,8,["visible","confirmSubmit"]),r(N,{visible:h.visible4,"onUpdate:visible":t[6]||(t[6]=e=>h.visible4=e),initRemark:h.curRemark,confirmSubmit:v.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])],64)}],["__scopeId","data-v-88d0aab0"]]);e("default",t({name:"FavoriteManage",data(){return{active:this.$route.params.id||"1",activeType:this.$route.params.type||"1",show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}]}},computed:{curComponent(){return"2"===this.activeType?kt:Ie},activeName(){return{1:"Token",2:"NFT"}?.[this.activeType]||"Token"}},methods:{select(e){this.activeType=e.value},back(){window?.main?.back?window?.main?.back?.():this.$router.go(-1)}}},[["render",function(e,t,d,h,p,b){const v=i("van-tab"),g=i("van-tabs"),y=i("van-icon"),k=i("van-nav-bar"),$=i("van-action-sheet");return a(),m(u,null,[r(k,{"left-text":"","left-arrow":"",onClickLeft:b.back,fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2"},{title:o((()=>[r(g,{class:"tab-top",active:p.active,"onUpdate:active":t[0]||(t[0]=e=>p.active=e),type:"card",color:"#fff",background:"#2C3254","title-active-color":"#878FBC","title-inactive-color":"#878FBC"},{default:o((()=>[r(v,{title:e.$t("favoriteManage"),name:"1"},null,8,["title"]),r(v,{title:e.$t("groupManage"),name:"2"},null,8,["title"])])),_:1},8,["active"])])),right:o((()=>[n("button",{class:"select-btn",onClick:t[1]||(t[1]=f((e=>p.show=!0),["stop"]))},[c(l(b.activeName)+" ",1),r(y,{name:"arrow-down"})])])),_:1},8,["onClickLeft"]),(a(),s(E(b.curComponent),{activeType:p.activeType,active:p.active},null,8,["activeType","active"])),r($,{show:p.show,"onUpdate:show":t[2]||(t[2]=e=>p.show=e),actions:p.actions,"cancel-text":e.$t("cancel"),onSelect:b.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}],["__scopeId","data-v-3bb63cbc"]]))}}}))}();
