import{_ as V,r as u,u as I,o as d,c as m,h as o,t as r,F as f,d as S,m as w,b as l,k as N,v as D,y as q,p as A,q as F,W as R,w as h,j as g,e as L}from"./index.4fbbd1b1.js";const T={name:"NewPair",props:{tableList:Array,loading:{type:Boolean,default:!1}},data(){return{defaultIcon:new URL("/assets/icon-default.995adb35.png",self.location).href}},computed:{isLoading(){return this.loading}},methods:{tableRowClick(e){var t,a,p,n,c;if((t=window==null?void 0:window.main)!=null&&t.openMarket)(p=(a=window==null?void 0:window.main)==null?void 0:a.openMarket)==null||p.call(a,e.target_token,e.chain);else if((c=(n=window==null?void 0:window.webkit)==null?void 0:n.messageHandlers)!=null&&c.iOS_Native_InjectJavascript){let _=e.target_token===e.token0_address?e.token0_symbol:e.token1_symbol;this.$f.callIos("openMarketPage",e.target_token,e.chain,_)}else this.$f.openBrowser("https://ave.ai/token/"+e.target_token+"-"+e.chain)}}},v=e=>(A("data-v-648a891a"),e=e(),F(),e),H={class:"table"},J={class:"table-list"},W={class:"table-item table-header"},G={class:"table-item_d"},K={class:"table-item_d"},Q=v(()=>o("th",{class:"table-item_d th"},"AMM",-1)),X={class:"table-item_d th"},Y={class:"table-item_d"},Z=["onClick"],x={class:"table-item_d symbol"},ee={key:0},te={class:"main"},ne=v(()=>o("br",null,null,-1)),oe={class:"minor"},se={key:1},ie={class:"main"},ae=v(()=>o("br",null,null,-1)),le={class:"minor"},ce={class:"table-item_d"},re={class:"main"},de=v(()=>o("br",null,null,-1)),he={class:"minor"},ue={class:"main"},me=v(()=>o("br",null,null,-1)),pe={class:"minor"},_e={class:"table-item_d"},fe=["src"],ve={class:"table-item_d"},ge=["src"],we={class:"table-item_d"},be={class:"main"},ke=v(()=>o("br",null,null,-1)),ye={class:"minor"};function Ne(e,t,a,p,n,c){const _=u("van-image"),b=u("van-empty"),k=I("imageError");return d(),m("div",H,[o("table",J,[o("tr",W,[o("th",G,r(e.$t("poolPair")),1),o("th",K,r(e.$t("pairAmount")),1),Q,o("th",X,r(e.$t("chain")),1),o("th",Y,r(e.$t("poolSize")),1)]),(d(!0),m(f,null,S(a.tableList,(i,$)=>(d(),m("tr",{class:"table-item",key:$,onClick:w(z=>c.tableRowClick(i),["stop"])},[o("td",x,[i.target_token===i.token0_address?(d(),m("div",ee,[o("div",te,[l(_,{class:"icon-token",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(`${i.token0_address}-${i.chain}`),"error-icon":n.defaultIcon},null,8,["src","error-icon"]),o("span",null,r(i.token0_symbol),1)]),ne,o("div",oe,[N("/ "),l(_,{class:"icon-token",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:i.logoURI||e.$f.formatIcon(`${i.token1_address}-${i.chain}`),"error-icon":n.defaultIcon},null,8,["src","error-icon"]),o("span",null,r(i.token1_symbol),1)])])):(d(),m("div",se,[o("div",ie,[l(_,{class:"icon-token",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(`${i.token1_address}-${i.chain}`),"error-icon":n.defaultIcon},null,8,["src","error-icon"]),o("span",null,r(i.token1_symbol),1)]),ae,o("div",le,[N("/ "),l(_,{class:"icon-token",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(`${i.token0_address}-${i.chain}`),"error-icon":n.defaultIcon},null,8,["src","error-icon"]),o("span",null,r(i.token0_symbol),1)])]))]),o("td",ce,[i.target_token===i.token0_address?(d(),m(f,{key:0},[o("span",re,r(e.$f.formatNumUnit(i.reserve0,2)),1),de,o("span",he,"/"+r(e.$f.formatNumUnit(i.reserve1,2)),1)],64)):(d(),m(f,{key:1},[o("span",ue,r(e.$f.formatNumUnit(i.reserve1,2)),1),me,o("span",pe,"/"+r(e.$f.formatNumUnit(i.reserve0,2)),1)],64))]),o("td",_e,[D(o("img",{class:"icon-svg icon-symbol",style:{cursor:"default"},src:`https://www.avestorage.cloud/swap/${i.amm}.jpeg`,alt:"",srcset:""},null,8,fe),[[k]])]),o("td",ve,[o("img",{class:"icon-svg icon-symbol",style:{cursor:"default"},src:`https://www.avestorage.cloud/chain/${i.chain}.png`,alt:"",srcset:""},null,8,ge)]),o("td",we,[o("span",be,"$"+r(i.target_token!==i.token0_address?e.$f.formatNumUnit(Math.round(i.reserve0*i.token0_price_usd*2)):e.$f.formatNumUnit(Math.round(i.reserve1*i.token1_price_usd*2))),1),ke,o("span",ye,r(e.$dayjs(i.created_at*1e3).fromNow()),1)])],8,Z))),128))]),D(l(b,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[q,a.tableList&&a.tableList.length===0&&!c.isLoading]])])}var $e=V(T,[["render",Ne],["__scopeId","data-v-648a891a"]]);const Ce={name:"Pool",components:{NewPairs:$e},data(){let e=Object.values(this.$store.state.chainConfig);e=e.map(a=>({...a,amm:Object.keys(a.swapUrl)}));const t=e.reduce((a,p)=>a.concat(p.amm),[]);return{conditions:{pageNO:1,pageSize:15,sort:"created_at",direction:"desc",chain:"",amm:"",minPoolSize:1e5},initNetworkList:e,amms:t,tableData:[],loading:!1,total:1e3,show:!1,filterPopupVisible:!1,listLoading:!1,finished:!1,show1:!1,show2:!1,error:!1,poolSizeOption:[{text:"$100",value:100},{text:"$1000",value:1e3},{text:"$10000",value:1e4},{text:"$100000",value:1e5},{text:"$500000",value:5e5},{text:"$1000000",value:1e6},{text:"$2000000",value:2e6}]}},computed:{networkList(){return[{netName:"",name:this.$t("allChain")},...this.initNetworkList]},ammList(){let e=[];return this.conditions.chain?e=this.networkList.find(a=>this.conditions.chain===a.netName).swaps.map(a=>({text:a.show_name,value:a.name,icon:`https://www.avestorage.cloud/swap/${a.name}.jpeg`}))||[]:e=this.networkList.reduce((a,p)=>a.concat(p.swaps||[]),[]).map(a=>({text:a.show_name,value:a.name,icon:`https://www.avestorage.cloud/swap/${a.name}.jpeg`}))||[],[{text:this.$t("allPool"),value:""}].concat(e)},chainName(){var e,t,a,p;return this.conditions.chain&&((t=(e=this.$store.state.chainConfig)==null?void 0:e[this.conditions.chain])==null?void 0:t.name)?(p=(a=this.$store.state.chainConfig)==null?void 0:a[this.conditions.chain])==null?void 0:p.name:this.$t("allChain")},sortByList(){return[{name:this.$t("createdTime"),value:"created_at",color:this.conditions.sort==="created_at"?"#558BED":""},{name:this.$t("poolCirculatingSupply"),value:"poolSize",color:this.conditions.sort==="poolSize"?"#558BED":""}]},sortDirectionList(){return[{name:this.$t("ascending"),value:"asc",color:this.conditions.direction==="asc"?"#558BED":""},{name:this.$t("descending"),value:"desc",color:this.conditions.direction==="desc"?"#558BED":""}]},activeSort(){var e;return(e=this.sortByList.find(t=>t.value===this.conditions.sort))==null?void 0:e.name},activeDirection(){var e;return(e=this.sortDirectionList.find(t=>t.value===this.conditions.direction))==null?void 0:e.name}},activated(){this.getNewPairs()},methods:{query(){this.filterPopupVisible=!1,this.conditions.pageNO=1,this.tableData=[],this.finished=!1,this.error=!1,this.getNewPairs()},getNewPairs(){this.loading=!0,R({...this.conditions,minPoolSize:Math.round(this.conditions.minPoolSize/2)}).then(e=>{this.total=e.total;let t=Array.isArray(e.data)?e.data:[];this.tableData=this.tableData.concat(t),(this.tableData.length>=this.total||t.length<this.conditions.pageSize)&&(this.finished=!0)}).catch(()=>{this.error=!0}).finally(()=>{this.loading=!1})},selectChain(e){this.show=!1,this.$refs.dropDownChain.toggle(!1),this.conditions.chain=e.netName,this.conditions.amm="",this.query()},onLoad(){this.conditions.pageNO++,this.getNewPairs()},onSelect1(e){this.conditions.sort=e.value,this.show1=!1},onSelect2(e){this.conditions.direction=e.value,this.show2=!1}}},Le={style:{display:"flex","align-items":"center"}},Se=["src"],De={class:"btn-content"},ze=["src"],Pe={style:{height:"50vh","overflow-y":"auto"}},Ve=["src"],Ie={class:"popup-title"},Ue=["src"],Be={class:"btn-content"};function Ee(e,t,a,p,n,c){const _=u("van-notice-bar"),b=u("van-icon"),k=u("van-cell"),i=u("van-dropdown-item"),$=u("van-dropdown-menu"),z=u("new-pairs"),U=u("van-list"),C=u("van-action-sheet"),P=u("van-button"),y=u("van-field"),B=u("van-stepper"),E=u("van-form"),M=u("van-popup"),j=I("imageError");return d(),m(f,null,[l(_,{class:"new-pool-notice",mode:"closeable","left-icon":"info-o",background:"#FFFBE8",color:"#ED6A0C",wrapable:"",scrollable:!1},{default:h(()=>[N(r(e.$t("newPoolNotice")),1)]),_:1}),l($,{"active-color":"#558BED",class:"filter-menu"},{default:h(()=>[l(i,{modelValue:n.conditions.chain,"onUpdate:modelValue":t[0]||(t[0]=s=>n.conditions.chain=s),teleport:"#app",ref:"dropDownChain"},{title:h(()=>[o("div",Le,[n.conditions.chain?(d(),m("img",{key:0,class:"icon-svg icon-net-connect",style:{cursor:"default"},src:`https://www.avestorage.cloud/chain/${n.conditions.chain}.png`,alt:"",srcset:""},null,8,Se)):g("",!0),o("span",De,r(c.chainName),1)])]),default:h(()=>[(d(!0),m(f,null,S(c.networkList,s=>(d(),L(k,{key:s.netName,class:"list-item",onClick:w(O=>c.selectChain(s),["stop"]),title:s.name,icon:e.$f.formatIcon(s),size:"large",clickable:"",center:""},{icon:h(()=>[s.netName?(d(),m("img",{key:0,class:"icon-svg icon-net-connect",style:{cursor:"default"},src:`https://www.avestorage.cloud/chain/${s.netName}.png`,alt:"",srcset:""},null,8,ze)):g("",!0)]),"right-icon":h(()=>[n.conditions.chain===s.netName?(d(),L(b,{key:0,color:"#558BED",name:"success"})):g("",!0)]),_:2},1032,["onClick","title","icon"]))),128))]),_:1},8,["modelValue"]),D(l(i,{modelValue:n.conditions.amm,"onUpdate:modelValue":t[1]||(t[1]=s=>n.conditions.amm=s),options:c.ammList,onChange:c.query},null,8,["modelValue","options","onChange"]),[[j]]),l(i,{modelValue:n.conditions.minPoolSize,"onUpdate:modelValue":t[2]||(t[2]=s=>n.conditions.minPoolSize=s),options:n.poolSizeOption,onChange:c.query},null,8,["modelValue","options","onChange"])]),_:1}),o("main",null,[l(U,{loading:n.loading,"onUpdate:loading":t[3]||(t[3]=s=>n.loading=s),finished:n.finished,error:n.error,"onUpdate:error":t[4]||(t[4]=s=>n.error=s),"error-text":e.$t("errorText"),onLoad:c.onLoad,"loading-text":e.$t("loading"),"finished-text":e.$t("noMore")},{default:h(()=>[l(z,{tableList:n.tableData,loading:n.loading},null,8,["tableList","loading"])]),_:1},8,["loading","finished","error","error-text","onLoad","loading-text","finished-text"]),l(C,{show:n.show,"onUpdate:show":t[5]||(t[5]=s=>n.show=s),"cancel-text":e.$t("cancel"),description:e.$t("selectChain"),teleport:"#app","close-on-click-action":""},{default:h(()=>[o("div",Pe,[(d(!0),m(f,null,S(c.networkList,s=>(d(),L(k,{key:s.netName,class:"list-item",onClick:w(O=>c.selectChain(s),["stop"]),title:s.name,icon:e.$f.formatIcon(s),value:s.netName,size:"large",clickable:""},{icon:h(()=>[s.netName?(d(),m("img",{key:0,class:"icon-svg icon-net-connect",style:{cursor:"default"},src:`https://www.avestorage.cloud/chain/${s.netName}.png`,alt:"",srcset:""},null,8,Ve)):g("",!0)]),_:2},1032,["onClick","title","icon","value"]))),128))])]),_:1},8,["show","cancel-text","description"]),l(M,{show:n.filterPopupVisible,"onUpdate:show":t[10]||(t[10]=s=>n.filterPopupVisible=s),class:"popup-container filter",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:h(()=>[o("h3",Ie,r(e.$t("filterCriteria")),1),l(E,{class:"popup-content",ref:"form","validate-first":"",onSubmit:c.query,"input-align":"right"},{default:h(()=>[l(y,{label:"Chain",placeholder:"",readonly:""},{input:h(()=>[l(P,{plain:"",hairline:"",type:"primary",size:"small",onClick:t[6]||(t[6]=s=>n.show=!0)},{default:h(()=>[n.conditions.chain?(d(),m("img",{key:0,class:"icon-svg icon-net-connect",style:{cursor:"default"},src:`https://www.avestorage.cloud/chain/${n.conditions.chain}.png`,alt:"",srcset:""},null,8,Ue)):g("",!0),o("span",Be,r(c.chainName),1),l(b,{name:"arrow-down"})]),_:1})]),_:1}),l(y,{label:e.$t("minCirculatingSupply"),placeholder:"",readonly:""},{input:h(()=>[l(B,{modelValue:n.conditions.minPoolSize,"onUpdate:modelValue":t[7]||(t[7]=s=>n.conditions.minPoolSize=s),"input-width":"80px",min:1e5,step:1e4},null,8,["modelValue"])]),_:1},8,["label"]),l(y,{label:e.$t("sortBy"),placeholder:"",readonly:"",clickable:"","right-icon":"arrow-down","model-value":c.activeSort,onClick:t[8]||(t[8]=w(s=>n.show1=!0,["stop"]))},null,8,["label","model-value"]),l(y,{label:e.$t("sortDirection"),placeholder:"",readonly:"",clickable:"","right-icon":"arrow-down","model-value":c.activeDirection,onClick:t[9]||(t[9]=w(s=>n.show2=!0,["stop"]))},null,8,["label","model-value"]),l(P,{class:"sumbit-btn",round:"",block:"",type:"primary","native-type":"submit"},{default:h(()=>[N(r(e.$t("search")),1)]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["show"]),l(C,{show:n.show1,"onUpdate:show":t[11]||(t[11]=s=>n.show1=s),"cancel-text":e.$t("cancel"),description:e.$t("sortBy"),teleport:"#app","close-on-click-action":"",actions:c.sortByList,onSelect:c.onSelect1},null,8,["show","cancel-text","description","actions","onSelect"]),l(C,{show:n.show2,"onUpdate:show":t[12]||(t[12]=s=>n.show2=s),"cancel-text":e.$t("cancel"),description:e.$t("sortDirection"),teleport:"#app","close-on-click-action":"",actions:c.sortDirectionList,onSelect:c.onSelect2},null,8,["show","cancel-text","description","actions","onSelect"])])],64)}var je=V(Ce,[["render",Ee],["__scopeId","data-v-1efaf694"]]);export{je as default};
